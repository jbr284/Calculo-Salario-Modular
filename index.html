<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sistema de Folha - Modular Data Centers</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="logo-icon.png">
  <meta name="theme-color" content="#1a1a1a">
</head>
<body>

  <header class="system-header">
    <div class="header-left">
        <div class="branding-area">
            <img src="logo-modular.png" alt="Modular Data Centers" class="logo-img">
        </div>
        <div class="divider-vertical"></div>
        <nav class="main-nav">
            <a href="#" class="active"><span class="material-symbols-outlined">calculate</span> Simulação de Folha</a>
        </nav>
    </div>
    <div class="header-right">
        <div class="user-profile">
            <div class="user-avatar">RH</div>
            <span>Gestão de Pessoas</span>
        </div>
    </div>
  </header>

  <main class="system-content">
    
    <div class="page-header">
        <h1>Cálculo de Salário Mensal</h1>
        <p>Simulador oficial com regras de 2026 e Lei 15.270.</p>
    </div>
    
    <div id="form-view" class="view-container active">
        <form id="formulario">
            <input type="hidden" id="diasUteis" />
            <input type="hidden" id="domFeriados" />
            <input type="hidden" id="feriadosExtras" />

            <div class="dashboard-grid">
                
                <div class="panel-card">
                    <div class="panel-header header-dark">
                        <span class="material-symbols-outlined">badge</span>
                        <h2>Dados do Colaborador</h2>
                    </div>
                    <div class="panel-body">
                        <div class="form-row">
                            <div class="input-group flex-1">
                                <label for="mesReferencia">Mês de Referência *</label>
                                <input type="month" id="mesReferencia" required class="form-control" />
                            </div>
                            <div class="input-group flex-1">
                                <label for="salario">Salário Base (R$) *</label>
                                <input type="text" id="salario" inputmode="decimal" placeholder="0,00" required class="form-control money-input" />
                            </div>
                        </div>

                        <div class="input-group mt-4">
                            <label class="label-bold mb-2">Situação</label>
                            <div class="segmented-control">
                                <label class="segment-btn">
                                    <input type="radio" name="tipoDias" value="completo" checked />
                                    <span>Mensal</span>
                                </label>
                                <label class="segment-btn">
                                    <input type="radio" name="tipoDias" value="saida_ferias" />
                                    <span>Mês de Férias</span>
                                </label>
                                <label class="segment-btn">
                                    <input type="radio" name="tipoDias" value="retorno_ferias" />
                                    <span>Retorno de Férias</span>
                                </label>
                            </div>
                        </div>

                        <div id="box-calculo-ferias" class="info-box hidden mt-3">
                            <h4 class="box-title"><span class="material-symbols-outlined icon-sm">beach_access</span> Férias</h4>
                            <div class="form-row">
                                <div class="input-group flex-1">
                                    <label>Dia Início/Retorno</label>
                                    <select id="inicioFerias" class="form-control form-select">
                                        <option value="">Dia...</option>
                                        <script>for(let i=1;i<=31;i++) document.write(`<option value="${i}">${i}</option>`);</script>
                                    </select>
                                </div>
                                <div class="input-group flex-1" id="col-qtd">
                                    <label>Duração</label>
                                    <input type="number" id="qtdDiasFerias" placeholder="30" class="form-control">
                                </div>
                            </div>
                            <p id="feedback-ferias" class="feedback-text"></p>
                        </div>

                        <div class="form-row mt-4">
                            <div class="input-group flex-1">
                                <label>Dias a Pagar</label>
                                <input type="number" id="diasTrab" readonly class="form-control input-readonly" value="30" />
                            </div>
                            <div class="input-group flex-1">
                                <label>Dependentes</label>
                                <input type="number" id="dependentes" class="form-control" placeholder="0" />
                            </div>
                        </div>

                        <div class="input-group mt-4">
                            <label class="label-bold mb-2" style="margin-bottom: 2px;">Feriados Locais</label>
                            <p class="helper-text" style="margin-top: 0; margin-bottom: 10px; font-size: 0.8rem;">
                                ℹ️ Adicione aqui os feriados municipais e estaduais.
                            </p>
                            
                            <div class="feriado-widget">
                                <div class="feriado-inputs">
                                    <select id="diaFeriado" class="form-select">
                                        <option value="">Dia...</option>
                                        <script>for(let i=1;i<=31;i++) document.write(`<option value="${String(i).padStart(2,'0')}">${i}</option>`);</script>
                                    </select>
                                    <button type="button" id="btn-add-feriado" class="btn btn-sm btn-outline-primary">Adic.</button>
                                </div>
                                <div id="listaFeriados" class="tags-container mt-2"></div>
                                <button type="button" id="btn-limpar-feriados" class="btn-text-danger">Limpar lista</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel-card">
                    <div class="panel-header header-green">
                        <span class="material-symbols-outlined">trending_up</span>
                        <h2>Proventos</h2>
                    </div>
                    <div class="panel-body">
                        <div class="hours-grid">
                            <div class="input-group"><label>HE 50%</label><input type="text" id="he50" class="form-control hora-conversivel"></div>
                            <div class="input-group"><label>HE 60%</label><input type="text" id="he60" class="form-control hora-conversivel"></div>
                            <div class="input-group"><label>HE 80%</label><input type="text" id="he80" class="form-control hora-conversivel"></div>
                            <div class="input-group"><label>HE 100%</label><input type="text" id="he100" class="form-control hora-conversivel"></div>
                            <div class="input-group"><label>HE 150%</label><input type="text" id="he150" class="form-control hora-conversivel"></div>
                            <div class="input-group highlight-input">
                                <label>Noturno (h)</label>
                                <input type="text" id="noturno" class="form-control hora-conversivel">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel-card">
                    <div class="panel-header header-red">
                        <span class="material-symbols-outlined">trending_down</span>
                        <h2>Descontos</h2>
                    </div>
                    <div class="panel-body">
                        <div class="form-row">
                            <div class="input-group flex-1">
                                <label>Faltas (dias)</label>
                                <input type="text" id="faltas" inputmode="decimal" class="form-control">
                            </div>
                            <div class="input-group flex-1">
                                <label>Atrasos (h)</label>
                                <input type="text" id="atrasos" class="form-control hora-conversivel">
                            </div>
                        </div>

                        <div class="divider my-4"></div>

                        <div class="input-group mb-3">
                            <label>Vale-Transporte (6%)</label>
                            <div class="switch-wrapper">
                                <label class="switch">
                                    <input type="checkbox" id="chk_vt">
                                    <span class="slider round"></span>
                                </label>
                                <input type="hidden" id="descontar_vt" value="nao">
                            </div>
                        </div>
                        
                        <div class="input-group mb-3">
                            <label>Plano SESI</label>
                            <select id="plano" class="form-control form-select">
                                <option value="nenhum">Não optante</option>
                                <option value="basico_individual">Básico Individual</option>
                                <option value="basico_familiar">Básico Familiar</option>
                                <option value="plus_individual">Plus Individual</option>
                                <option value="plus_familiar">Plus Familiar</option>
                            </select>
                        </div>
                        
                        <div class="input-group mb-3">
                            <label>Contrib. Assistencial (R$)</label>
                            <input type="text" id="assistencial" inputmode="decimal" class="form-control money-input" placeholder="0,00" />
                        </div>

                        <div class="input-group mb-3">
                            <label>Mensalidade Sindical</label>
                            <select id="sindicato" class="form-control form-select">
                                <option value="nao">Não Associado</option>
                                <option value="sim">Associado</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <label>Empréstimo (R$)</label>
                            <input type="text" id="emprestimo" inputmode="decimal" class="form-control money-input" placeholder="0,00" />
                        </div>
                    </div>
                </div>

            </div>
        </form>
        
        <div class="actions-bar-sticky">
            <button type="button" id="btn-salvar" class="btn btn-outline-primary btn-lg">
                <span class="material-symbols-outlined">save</span> Salvar
            </button>
            <button type="button" id="btn-calcular" class="btn btn-primary btn-lg pulse-animation">
                <span class="material-symbols-outlined">calculate</span> Calcular Folha
            </button>
        </div>
    </div>

    <div id="result-view" class="view-container hidden">
      <div class="report-card">
          <div class="report-header">
              <img src="logo-modular.png" alt="Modular" class="report-logo">
              <h2>Demonstrativo de Pagamento</h2>
              <span class="report-date">Referência: <span id="ref-display">--/--</span></span>
          </div>
          <div id="resultado-container" class="report-body"></div>
      </div>
      <div class="actions-footer mt-4">
          <button type="button" id="btn-voltar" class="btn btn-secondary btn-lg">
            <span class="material-symbols-outlined">arrow_back</span> Voltar
          </button>
          <button type="button" id="btn-pdf" class="btn btn-danger btn-lg">
            <span class="material-symbols-outlined">picture_as_pdf</span> PDF
          </button>
      </div>
    </div>

  </main>

  <footer class="system-footer">
      <p>© 2026 Modular Data Centers - Ferramenta Interna de RH</p>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script src="app.js"></script>
  <script>
      document.getElementById('chk_vt').addEventListener('change', function() {
          document.getElementById('descontar_vt').value = this.checked ? 'sim' : 'nao';
      });

      document.getElementById('btn-calcular').addEventListener('click', () => {
         const mesRef = document.getElementById('mesReferencia').value;
         if(mesRef) {
             const [ano, mes] = mesRef.split('-');
             document.getElementById('ref-display').textContent = `${mes}/${ano}`;
         }
      });
  </script>
</body>
</html>
